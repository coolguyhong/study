## 1장 인프라 아키텍처를 살펴보자

### 1.1 시작하며

- IT 인프라: IT의 기반이 되는 것
- 인프라 아키텍처: IT 인프라의 구조를 의미
- 인터넷 검색 시스템, 항공 회사 티켓 발권 시스템, 편의점의 계산대 등 이용 방법이나 사용자가 다르지만 IT 인프라 위에서 동작
- 시스템의 가장 중요한 장점은 살리고 단점은 최소화 하는 방법으로 설계해야 함


### 1.2 집약형과 분할형 아키텍쳐

#### 1.2.1 집약형 아키텍쳐

- 해당 기업의 주요 업무를 모두 한 대로 처리
- 컴퓨터를 구성하는 주요 부품은 모두 다중화돼 있어서 하나가 고장나더라도 업무 계속 가능
- 복수의 서로 다른 업무 처리를 동시에 실행할 수 있도록 유한 리소스 관리
- 장점
    + 한 대의 대형 컴퓨터만 있으면 되므로 구성이 간단
    + 대형 컴퓨터의 리소스 관리나 이중화에 의해 안정성이 높고 고성능
- 단점
    + 대형 컴퓨터의 도입 비용과 유지 비용이 크다
    + 확장성에 한계가 있다.

#### 1.2.2 분할형 아키텍처

- 여러 대의 컴퓨터를 조합해서 하나의 시스템을 구축하는 구조
- 장점
    + 낮은 비용으로 시스템을 구축할 수 있다
    + 서버 대수를 늘릴 수 있어서 확장성이 높다
- 단점
    + 대수가 늘어나면 관리 구조가 복잡해진다
    + 한 대가 망가지면 영향 범위를 최소화하기 위한 구조를 검토해야 한다


### 1.3 수직 분할형 아키텍처

- 분할형에서는 서버 분할 방식, 즉 역할 분담을 고려 해야 함
- 수직형이라고 표현하는 것은, 특정 섭 측면에서 봤을 때 역할에 따라 '위' 또는 '아래' 계층으로 나뉘기 때문

#### 1.3.1 클라이언트-서버형 아키텍처

- 업무 애플리케이션, 미들웨어, 데이터베이스 등의 소프트웨어를 '물리 서버' 상에서 운영
- 위의 소프트웨어에 '클라이언트' 또는 '단말'이라 불리는 소형 컴퓨터가 접속해서 이용하는 형태
- 클라이언트 측에 전용 소프트웨어를 설치해야 함
- 예시: 주식 판매 시스템은 그래프 표시나 주가 흐름 분석은 PC에서 하고, 필요에 따라 서버에서 주가 데이터를 취득하는 방식
- 장점
    + 클라이언트 측에서 많은 처리를 실행할 수 있어서 소수의 서버로 다수의 클라이언트를 처리할 수 있다
- 단점
    + 클라이언트 측의 소프트웨어 정기 업데이트가 필요하다
    + 서버 확장성에 한계가 발생할 수 있다

#### 1.3.2 3계층형 아키텍처

- 클라이언트-서버형을 발전시킨 것
- 프레젠테이션 계층, 애플리케이션 계층, 데이터 계층의 3층 구조로 분할
- 프레젠테이션 계층
    + 사용자 입력을 받는다
    + 웹 브라우저 화면을 표시한다
- 애플리케이션 계층
    + 사용자 요청(request)에 따라 업무 처리를 한다
- 데이터 계층
    + 애플리케이션 계층의 요청에 딸 데이터 입출력을 한다
- 장점
    + 서버 부하 집중 개선
    + 클라이언트 단말의 정기 업데이트가 불필요
    + '처리 반환'에 의한 서버 부하 저감
- 단점
    + 구조가 클라이언트-서버 구성보다 복잡하다


### 1.4 수평 분할형 아키텍처

- 용도가 같은 서버를 늘려나가는 방식

#### 1.4.1 단순 수평 분할형 아키텍처

- 장점
    + 수평으로 서버를 늘리기 때문에 확장성이 향상된다
    + 분할한 시스템이 독립적으로 운영되므로 서로 영향을 주지 않는다
- 단점
    + 데이터를 일원화해서 볼 수 없다
    + 애플리케이션 업데이트는 양쪽을 동시에 해 주어야 한다
    + 처리량이 균등하게 분할돼 있지 않으면 서버별 처리량에 치우침이 생긴다

#### 1.4.2 공유형 아키텍처

- 장점
    + 수평으로 서버를 늘리기 때문에 확장성이 향상된다
    + 분할한 시스템이 서로 다른 시스템의 데이터를 참조할 수 있다
- 단점
    + 분할한 시스템 간 독립성이 낮아진다
    + 공유한 계층의 확장성이 낮아진다


### 1.5 지리 분할형 아키텍처

- 업무 연속성 및 시스템 가용성을 높이기 위한 방식

#### 1.5.1 스탠바이형 아키텍처

- 물리 서버를 최소 두 대를 준비하여 한 대가 고장 나면 가동 중인 소프트웨어를 다른 한 대로 옮겨서 운영하는 방식
- 페일오버(F/O): 소프트웨어 재시작을 자동으로 하는 구조
- 물리 서버 고장에 대처할 수 있지만, 보통 때는 페일오버 대상 서버가 놀고 있는 상태가 되기 때문에 리소스 측면에서 낭비가 발생

#### 1.5.2 재해 대책형 아키텍처

- 서버 장비를 최소 구성 및 동시 구성으로 별도 사이트에 배치하고 소프트웨어도 상용 환경과 동일하게 설정
- 재해가 발생하면 동기화된 사이트에 있는 정보를 이용할 수 있음
- 애플리케이션 최신화와 데이터 동기화는 어느정도 실시간성을 유지해서 사이트 간 동기 처리를 해야 함

#### 1.5.3 클라우드형 아키텍처

- 3계층형 시스템의 일부 또는 전부가 클라우드 서비스 제공자가 보유하고 있는 물리 서버에서 동작
- Saas(Software as a Service): 서버뿐만 아니라 애플리케이션을 포함한 업무 시스템을 클라우드 서비스 회사가 제공 ex) Gmail
- PaaS(Platform as a Service), IaaS(Infrastructure as a Service), DBaaS(Database as a Service)등에서는 일반적인 3계층형 시스템을 구성하는 서버의 일부 혹은 전부를 클라우드 상의 리소스로 대체
